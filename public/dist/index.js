/** layuiAdmin.std-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;layui.extend({setter:"config",admin:"lib/admin",view:"lib/view"}).define(["setter","admin"],function(e){power=[];var a=layui.setter,n=layui.element,t=layui.admin,i=t.tabsPage,r=layui.view,l=function(){var e=layui.router(),o=e.path,y=t.correctRouter(e.path.join("/"));r.request({url:"/login/checkTokenVaild",type:"get",sync:!1,data:{token:layui.data(a.tableName)[a.request.tokenName]},success:function(e){e.success||(window.location.href="/start/#/user/login")}}),o.length||(o=[""]),""===o[o.length-1]&&(o[o.length-1]=a.entry);var h=function(e){l.haveInit&&c(".layui-layer").each(function(){var e=c(this),a=e.attr("times");e.hasClass("layui-layim")||layer.close(a)}),l.haveInit=!0,c(s).scrollTop(0),delete i.type};return"tab"===i.type&&("/"!==y||"/"===y&&t.tabsBody().html())?(t.tabsBodyChange(i.index),h(i.type)):(r().render(o.join("/")).then(function(r){var l,o=c("#LAY_app_tabsheader>li");o.each(function(e){var a=c(this),n=a.attr("lay-id");n===y&&(l=!0,i.index=e)}),a.pageTabs&&"/"!==y&&(l||(c(s).append('<div class="layadmin-tabsbody-item layui-show"></div>'),i.index=o.length,n.tabAdd(u,{title:"<span>"+(r.title||"新标签页")+"</span>",id:y,attr:e.href}))),this.container=t.tabsBody(i.index),a.pageTabs||this.container.scrollTop(0),n.tabChange(u,y),t.tabsBodyChange(i.index)}).done(function(){layui.use("common",layui.cache.callback.common),d.on("resize",layui.data.resize),n.render("breadcrumb","breadcrumb"),t.tabsBody(i.index).on("scroll",function(){var e=c(this),a=c(".layui-laydate"),n=c(".layui-layer")[0];a[0]&&(a.each(function(){var e=c(this);e.hasClass("layui-laydate-static")||e.remove()}),e.find("input").blur()),n&&layer.closeAll("tips")}),JSON.stringify(power)!=JSON.stringify([-1])&&c.each(c("*[ht-auth]"),function(){var e=c(this).attr("ht-id");c.inArray(parseInt(e),power)==-1&&c(this).hide()})}),void h())},o=function(e){var n,i=layui.router(),o=r(a.container),s=t.correctRouter(i.path.join("/"));if(layui.each(a.indPage,function(e,a){if(s===a)return n=!0}),layui.config({base:a.base+"controller/"}),n||"/user/login"===s)o.render(i.path.join("/")).done(function(){t.pageType="alone"});else{if(a.interceptor){var u=layui.data(a.tableName);if(!u[a.request.tokenName])return location.hash="/user/login/redirect="+encodeURIComponent(s)}"console"===t.pageType?l():o.render("layout").done(function(){l(),layui.element.render(),t.screen()<2&&t.sideFlexible(),t.pageType="console"})}},s="#LAY_app_body",u="layadmin-layout-tabs",c=layui.$,d=c(window);layui.link(a.base+"style/admin.css?v="+(t.v+"-1"),function(){o()},"layuiAdmin"),window.onhashchange=function(){o(),layui.event.call(this,a.MOD_NAME,"hash({*})",layui.router())},layui.each(a.extend,function(e,n){var t={};t[n]="{/}"+a.base+"lib/extend/"+n,layui.extend(t)}),e("index",{render:l})});