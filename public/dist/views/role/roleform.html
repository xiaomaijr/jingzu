<div class="layui-form" lay-filter="layuiadmin-form-role" style="padding: 20px 30px 0 0;">
  <div class="layui-form-item">
    <label class="layui-form-label">角色</label>
    <div class="layui-input-block">
      <script type="text/html" template>
        <input type="text" name="name" value="{{ d.params.name || '' }}" lay-verify="required" placeholder="请输入角色名称" autocomplete="off" class="layui-input">
      </script>
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">权限范围</label>
    <div class="layui-input-block">
        <div id="test1"></div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">具体描述</label>
      <div class="layui-input-block">
        <script type="text/html" template>
          <textarea type="text" name="description" lay-verify="required" autocomplete="off" class="layui-textarea">{{ d.params.description || '' }}</textarea>
        </script>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label"></label>
      <div class="layui-input-inline">
        <input type="button" lay-submit lay-filter="LAY-user-role-submit" value="确认" class="layui-btn">
      </div>
    </div>
    <script type="text/html" template>
      <input type="hidden" name="id" value="{{ d.params.id || '' }}">
    </script>
  </div>

<script>
  layui.use(['admin', 'table','upload','selfajax','tree'], function(){
    var $ = layui.$
            ,admin = layui.admin
            ,view = layui.view
            ,table = layui.table
            ,tree = layui.tree
            ,selfajax = layui.selfajax
            ,upload = layui.upload
            ,form = layui.form;


    var datap=layui.datap;console.log(datap);
    //渲染
    var inst1 = tree.render({
      elem: '#test1'  //绑定元素
      ,showCheckbox: true
      ,skin: 'shihuang'
      ,data: datap
      ,id: 'demoId' //定义索引
      ,oncheck: function(obj){
      }
    });
    var  ss=layui.ruleids
    console.log(ss);
    if(ss!='a'){
      ss = JSON.parse(ss)
      for (var key in ss) {
        ss[key]=parseInt(ss[key])
      }
      console.log(ss);
      tree.setChecked('demoId', ss);
    }
  });
</script>
